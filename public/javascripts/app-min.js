$(document).ready(function(){$(".cont");const t=$(".slider"),e=$(".nav"),n=750,a=.2*$(window).width();let s=1,i=!1,d=0,o=["Amsterdam","Rome","Newâ€”York","Singapore","Prague"],l=o.length,r=[];o.map(t=>{let e=t.length,n=Math.floor(e/4),a=new RegExp(".{1,"+n+"}","g");r.push(t.match(a))});let c=function(n){let a=$(document.createDocumentFragment()),s=$(document.createDocumentFragment());const i=o.indexOf(o[n])+1,d=r[n][0].charAt(0),l=$(`<div data-target="${i}" class="slide slide--${i}">\n\t\t\t\t\t\t\t<div class="slide__darkbg slide--${i}__darkbg"></div>\n\t\t\t\t\t\t\t<div class="slide__text-wrapper slide--${i}__text-wrapper"></div>\n\t\t\t\t\t\t</div>`),c=$(`<div class="slide__letter slide--${i}__letter">\n\t\t\t\t\t\t\t${d}\n\t\t\t\t\t\t</div>`);for(let t=0,e=r[n].length;t<e;t++){const e=$(`<div class="slide__text slide__text--${t+1}">\n\t\t\t\t\t\t\t\t${r[n][t]}\n\t\t\t\t\t\t\t</div>`);a.append(e)}const u=$(`<li data-target="${i}" class="nav__slide nav__slide--${i}"></li>`);s.append(u),e.append(s),l.find(`.slide--${i}__text-wrapper`).append(c).append(a),t.append(l),o[n].length<=4&&$(".slide--"+i).find(".slide__text").css("font-size","12vw")};for(let t=0,e=l;t<e;t++)c(t);function u(t){$(".nav__slide--"+s).removeClass("nav-active"),$(".nav__slide--"+t).addClass("nav-active")}function m(){i=!1}function _(e){i=!0,d=0,t.addClass("animation"),t.css({transform:"translate3d(-"+100*(s-e)+"%, 0, 0)"}),t.find(".slide__darkbg").css({transform:"translate3d("+50*(s-e)+"%, 0, 0)"}),t.find(".slide__letter").css({transform:"translate3d(0, 0, 0)"}),t.find(".slide__text").css({transform:"translate3d(0, 0, 0)"})}function f(){s>=l||(_(0),setTimeout(m,n),u(s+1),s++)}function v(){s<=1||(_(2),setTimeout(m,n),u(s-1),s--)}$(".nav__slide--1").addClass("nav-active"),$(document).on("mousedown touchstart",".slide",function(e){if(i)return;let n=+$(this).attr("data-target"),a=e.pageX||e.originalEvent.touches[0].pageX;t.removeClass("animation"),$(document).on("mousemove touchmove",function(e){let i=e.pageX||e.originalEvent.touches[0].pageX;d=a-i,1===n&&d<0||n===l&&d>0||(t.css({transform:"translate3d(-"+(100*(s-1)+d/30)+"%, 0, 0)"}),t.find(".slide__darkbg").css({transform:"translate3d("+(50*(s-1)+d/60)+"%, 0, 0)"}),t.find(".slide__letter").css({transform:"translate3d("+d/60+"vw, 0, 0)"}),t.find(".slide__text").css({transform:"translate3d("+d/15+"px, 0, 0)"}))})}),$(document).on("mouseup touchend",function(t){$(document).off("mousemove touchmove"),i||(d>=a?f():d<=-a?v():(_(1),setTimeout(m,n)))}),$(document).on("click",".nav__slide:not(.nav-active)",function(){let t=+$(this).attr("data-target");u(t),s=t,_(1)}),$(document).on("click",".side-nav",function(){let t=$(this).attr("data-target");"right"===t&&f(),"left"===t&&v()}),$(document).on("keydown",function(t){39===t.which&&f(),37===t.which&&v()}),$(document).on("mousewheel DOMMouseScroll",function(t){if(i)return;let e=t.originalEvent.wheelDelta;(e>0||t.originalEvent.detail<0)&&v(),(e<0||t.originalEvent.detail>0)&&f()})});